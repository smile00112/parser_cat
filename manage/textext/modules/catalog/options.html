################################################################################
@cms_body[]
^if(def $form:id && def $form:idpage && $cms.cmsUserLevel>0){
#-------------------------------------------------------------------------------
<script src="./scripts/actions.js" type="text/javascript"></script>
<style>
	.options_block{
		margin-bottom: 20px^;
	}
	.options_column{
		display: inline-block^;
		vertical-align: top^;
		margin-right: 20px^;
	}
	.options_column.options{
		border-right: 1px dashed #999999^;
		padding-right: 20px^;
	}
	.fa-times{
		top: -1px^;
		font-size: 24px^;
	}
</style>
#-------------------------------------------------------------------------------
# Выводим заголовок страницы
	^cms.ShowPageHeader[Настройки каталога;$cms.currentModule.path;^this.GetClassInfo[]]
	<p class="cms_h2">
		<a href="${cms.cmsFolder}/textext/?idpage=$form:idpage"><i class="fa fa-reply fa-3x inline blue mr10"></i>К блокам</a>
		<a id="addSlideBtn" href="./?id=$form:id&idpage=$form:idpage^if(def $form:parent){&parent=$form:parent}" class="ml20 addForm"><img src="${cms.cmsFolder}/${cms.currentModule.path}/index.png" class="inline mr10" width="64">К каталогу</a>
		<span data-width="400" data-href="add_expand_field.html" data-title="Добавить дополнительное поле" data-reload="true" class="link pointer ml20" onClick="^$(this).OpenFancybox()^;">
			<i class="fa fa-plus fa-3x inline blue mr10"></i>Добавить дополнительное поле</span>
	</p>
	$options[^textext:GetOptions[$form:id]]
	^if(!def $options){
		$res[^textext:SetDefaultBlockOptions[$form:id;$.moduleName[$this.className]]]
		$options[^textext:GetOptions[$form:id]]
	}
	$expandFields[^this.GetExpandFields[]]
	<div class="options_block">
		<div class="options_column options">
			<div class="cms_h1">Опции:</div>
			<br />
			<table class="table_dsb">
				<tr class="tB">
					<td>Параметр</td>
					<td>Значение</td>
				</tr>
			^options.menu{
				<tr data-id="$options.id">
					<td>${options.named}:</td>
					<td>
					^switch[$options.type_field]{
						^case[0]{<input type="text" name="value" value="$options.value" class="cms_input w100p" onChange="^$(this).SaveOption()^;">}
						^case[1]{<input type="checkbox" name="value" onChange="^$(this).SaveCheckBoxOption()^;"^if($options.value==1){ checked}>}
					}
					</td>
				</tr>
			}
			</table>
		</div><div class="options_column">
		^if($expandFields.CLASS_NAME eq 'table'){
			<div class="cms_h1">Дополнительные поля:</div>
			<br />
			<table class="table_dsb">
				<tr class="tB">
					<td>Название</td>
					<td>Поле</td>
#					<td>Тип</td>
					<td></td>
				</tr>
				^expandFields.menu{
				<tr data-field="$expandFields.field">
					<td><input type="text" name="title" value="$expandFields.title" class="cms_input w100p"></td>
					<td>$expandFields.field</td>
#					<td>$cms:MySQLfieldTypes.[$expandFields.type_id].caption</td>
					<td>
						<span class="fa-stack pointer blue delete_expand_field" title="Удалить">
							<i class="fa fa-square-o fa-stack-2x"></i>
							<i class="fa fa-times fa-stack-1x"></i>
						</span>
					</td>
				</tr>
				}
			</table>
			}
		</div>
	</div>
}{
	$response:refresh[$.value(0)$.url[${cms:cmsFolder}/]]
}
################################################################################