$(document).ready(function(){	var addSlideBtn = $("#addSlideBtn"),			addSlideBtnOffset = addSlideBtn.offset().top;	$(window).scroll(function(){		if ( $(this).scrollTop() > addSlideBtnOffset && !addSlideBtn.hasClass("fixed") ){			addSlideBtn.addClass("fixed");		} else if($(this).scrollTop() <= addSlideBtnOffset && addSlideBtn.hasClass("fixed")) {			addSlideBtn.removeClass("fixed");		}	});	$(".addForm").fancybox({		padding:			5,		maxWidth:			800,		maxHeight:		600,		fitToView:		false,		autoSize:			true,		closeClick:		false,		openEffect:		'none',		closeEffect:	'none'	});});$.fn.ChangeVisible = function(){	var id			= $(this).closest(".block_element").attr("data-id"),			object	= $(this);	$.post("actions.html", { action: "update_visible", id: id }, function(data){		var answer = JSON.parse(data);		if(!answer.error){			if(!answer.visible){				object.removeClass('fa-eye').addClass('fa-eye-slash');			} else {				object.removeClass('fa-eye-slash').addClass('fa-eye');			}		} else {alert(answer.text);}	});};$.fn.Delete = function(){	if (confirm('Вы действительно хотите удалить этот элемент?')){		var id			= $(this).closest(".block_element").attr("data-id"),				object	= $(this).closest(".block_element");		$.post("actions.html", { action: "delete", id: id }, function(data){			var answer = JSON.parse(data);			if(!answer.error){				object.fadeTo("slow", 0, function() {					object.remove();					if($(".block_element").length<1){$(".no-images").show();}				});			} else {alert(answer.text);}		});	}};$.fn.Save = function(){	var id			= $(this).closest(".block_element").attr("data-id"),			field		= $(this).attr("name"),			value		= $(this).val(),			object	= $(this);	$(".wait").show();	$.post("actions.html", { action: "save_field", id: id, field: field, value: value }, function(data){		var answer = JSON.parse(data);		$(".wait").hide();		if(!answer.error){			switch (field) {				case 'sortir':					var sortArray = [],					prevSort = 0,					currentObject = object.closest(".block_element");					value = parseInt(value),					object.attr("data-prev", value);					object.val(value);					$('input[name="sortir"][data-prev!="'+value+'"]').each(function(i,elem) {						sortArray[i] = parseInt($(elem).val());					});					sortArray.sort(function (a, b) {						return a - b;					});					for (i = 0; i < sortArray.length; i++) {						if( sortArray[i] > value){							break;						} else {							prevSort = sortArray[i];						}					}					currentObject.fadeTo("slow", 0, function() {						if(prevSort>0){							currentObject.insertAfter($('input[name="sortir"][data-prev="'+prevSort+'"]').closest(".block_element"));						} else {							currentObject.insertBefore($('input[name="sortir"][data-prev="'+sortArray[0]+'"]').closest(".block_element"));						}					});					currentObject.fadeTo("slow", 1);					break				default:					object.addClass("green_border");					setTimeout(function(){						object.removeClass("green_border");					},1000);			}		} else {			object.val(object.attr("data-prev"));			alert(answer.text);		}	});};$.fn.DeleteImage = function(){	var image_id	= $(this).closest(".block_element").attr("data-id");	$.post("actions.html", { action: "delete_gallery_image", id: image_id }, function(data){		var answer = JSON.parse(data);		if(!answer.error){			$("#image_"+image_id).hide();			$("#no_image_"+image_id).show();		} else { alert(answer.text); }	});};$.fn.SaveOption = function(){	var id			= $(this).closest("tr").attr("data-id"),			value		= $(this).val(),			object	= $(this);	$.post("actions.html", { action: "save_option", id: id, value: value }, function(data){		var answer = JSON.parse(data);		if(!answer.error){			object.addClass("green_border");			setTimeout(function(){				object.removeClass("green_border");			},1000);		} else { alert(answer.text); }	});};$.fn.SaveCheckBoxOption = function(){	var id			= $(this).closest("tr").attr("data-id"),			value		= $(this).is(':checked');	if(value){value=1;}else{value=0;}	$.post("actions.html", { action: "save_option", id: id, value: value });};$.fn.SaveCheckBox = function(){	var id			= $(this).closest(".block_element").attr("data-id"),			field		= $(this).attr("name"),			value		= $(this).is(':checked'),			object	= $(this);	if(value){value=1;}else{value=0;}	$.post("actions.html", { action: "save_field", id: id, field: field, value: value }, function(data){		if(data > 0){			switch (field) {				case 'new':					if(value){						$("#new_element_"+id).show();					} else {						$("#new_element_"+id).hide();					}					break				default:			}			object.addClass("green_border");			setTimeout(function(){				object.removeClass("green_border");			},1000);		}	});};